
NamedFunction = require "named-function"
internalize = require "internalize"
setType = require "set-type"

LazyVar = NamedFunction "LazyVar", (getter) ->

  self =

    get: ->
      self._get.call this

    set: (newValue) ->
      self._value = newValue

  internalize self,

    _value: undefined

    _get: ->
      self._get = -> self._value
      self._value = getter.call this

  setType self, LazyVar

module.exports = LazyVar
