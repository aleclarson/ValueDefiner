
# stack v1.0.0 [![frozen](http://badges.github.io/stability-badges/dist/frozen.svg)](http://github.com/badges/stability-badges)

Access `CallSite` stacks in Node.

Compatible with [React Native](http://github.com/facebook/react-native) in that it returns `null` rather than crashing.

install
-------

```sh
npm install --save aleclarson/stack#1.0.0
```

usage
-----

A stack "constructor" is exported.

```CoffeeScript
Stack = require "stack"
```

Remember to `require "coffee-script"` (or any other library that sets `Error.prepareStackTrace`) **before** you `require "stack"`.

-

Call it with no arguments to create a Stack starting at the line it is on.

```CoffeeScript
stack = Stack()
```

-

`Stack` will always return an `Array` containing `CallSite`s that represent a frame in the stack trace.

```CoffeeScript
stack.forEach (frame) ->
  frame.getThis()
  frame.getTypeName()
  frame.getFunction()
  frame.getFunctionName()
  frame.getLineNumber()
  frame.getColumnNumber()
  frame.getEvalOrigin()
  frame.isToplevel()
  frame.isEval()
  frame.isNative()
  frame.isConstructor()
```

Read more about `CallSite`s [**here**](https://code.google.com/p/v8-wiki/wiki/JavaScriptStackTraceApi#Customizing_stack_traces).

-

Pass an `Error` to `Stack` and receive an `Array` of `CallSite`s.

```CoffeeScript
stack = Stack TypeError()
```

-

There are other options available, too.

```CoffeeScript
Stack
  error: TypeError()       # default: new Error()
  limit: 4                 # default: Infinity
  skip: 2                  # default: 0
```

You can edit **some** of the options' default values. Just modify `Stack.defaults`!

-

You can also limit the printed stack trace without affecting the number of frames you can access.

```CoffeeScript
Error.stackPrintLimit = 4
```

**IMPORTANT:** Be sure to not confuse this with `Error.stackTraceLimit` (which should never be touched).
